(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return c}),n.d(t,"a",function(){return i});var a=n(53),o=n(39),r=n(40);function c(t,n){return new Promise(function(c,i){var s=o.stringify({encrypted_metadata:t,data:n}),d={hostname:r.awsLambda.saveTaskData.host,port:443,path:r.awsLambda.saveTaskData.path,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":e.byteLength(s)}},l=a.request(d,function(e){e.setEncoding("utf8"),e.on("data",function(){}),e.on("end",c)});l.on("error",function(e){r.debug&&(console.log("ERROR:"),console.log(e)),i(e)}),l.write(s),l.end()})}function i(t){return new Promise(function(n,c){var i=o.stringify({encrypted_metadata:t}),s={hostname:r.awsLambda.fetchLink.host,port:443,path:r.awsLambda.fetchLink.path,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":e.byteLength(i)}},d=a.request(s,function(e){e.setEncoding("utf8");var t="";e.on("data",function(e){t+=e}),e.on("end",function(){return n(t)})});d.on("error",function(e){r.debug&&(console.log("ERROR:"),console.log(e)),c(e)}),d.write(i),d.end()})}}).call(this,n(9).Buffer)},40:function(e){e.exports={taskVersion:"1.0.0",taskName:"visualQualifying",debug:!1,awsLambda:{saveTaskData:{host:"de8cnjde61.execute-api.us-east-2.amazonaws.com",path:"/default/saveTaskData"},fetchLink:{host:"3pnzb6n9vf.execute-api.us-east-2.amazonaws.com",path:"/default/fetchLink"}}}},45:function(e,t,n){e.exports=n(94)},57:function(e,t){},59:function(e,t){},71:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(42),c=n.n(r),i=n(16),s=n(17),d=n(19),l=n(18),u=n(20),f=n(6),m=n(23),p=(n(71),n(40)),h=n(72),b=n(73);n(85);var g=function(e){function t(e){var n;Object(i.a)(this,t),n=Object(d.a)(this,Object(l.a)(t).call(this,e));var a=b.parse(n.props.location.search,{ignoreQueryPrefix:!0});return n.state={encryptedMetadata:a.id,sendingData:!1,link:void 0},console.log(n.state.encryptedMetadata),h.isUndefined(n.state.encryptedMetadata)||n.addScript("/LabJsWrapper/external/lab.js",function(){n.addScript("/LabJsWrapper/script.js")}),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("message",function(t){if("labjs.data"===t.data.type){var n=t.data.json;if(p.debug)return void console.log(n);console.log("sending data"),e.setState({sendingData:!0}),Object(m.b)(e.state.encryptedMetadata,n).then(function(){console.log("Saved task data"),Object(m.a)(e.state.encryptedMetadata).then(function(t){return e.setState({link:t})})})}})}},{key:"addScript",value:function(e,t){var n=document.createElement("script");n.src=e,n.type="module",n.onreadystatechange=t,n.onload=t,document.head.appendChild(n)}},{key:"render",value:function(){return h.isUndefined(this.state.encryptedMetadata)?o.a.createElement("div",null,o.a.createElement("h2",null,"Something went wrong. Please try again.")):this.state.sendingData?(h.isUndefined(this.state.link)||window.location.assign(this.state.link),o.a.createElement("div",{className:"container fullscreen","data-labjs-section":"main"},o.a.createElement("main",{className:"content-vertical-center content-horizontal-center"},o.a.createElement("div",null,o.a.createElement("h2",null,"Do not exit"))))):o.a.createElement("div",{className:"container fullscreen","data-labjs-section":"main"},o.a.createElement("main",{className:"content-vertical-center content-horizontal-center"},o.a.createElement("div",null,o.a.createElement("h2",null,"Loading Experiment"),o.a.createElement("p",null,"The experiment is loading and should start in a few seconds"))))}}]),t}(a.Component),v=function(){return o.a.createElement(f.c,null,o.a.createElement(f.a,{path:"/",exact:!0,component:g}))},w=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(v,null))}}]),t}(a.Component),y=n(22),E=n(3);n.d(t,"history",function(){return k});var k=Object(E.a)();c.a.render(o.a.createElement(y.a,{history:k,basename:"/LabJsWrapper"},o.a.createElement(w,null)),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.bd961139.chunk.js.map